<!DOCTYPE html>
<html>

<head>
	<title>Emurtis Video Service</title>
</head>

<body>
	<div class="container-fluid" id="app">
		<div class="jumbotron jumbotron-fluid text-center">
			<h1>Welcome to Emurtis Video Service<sup><small>TM</small></sup></sup></h1>
			<p><em>Your source for uploading and viewing videos!</em>
			</p>
			<div v-if="!authenticated" class="form-group text-center">
				<input class="col-4 mx-auto form-control" type="text" name="username" v-model="input.username" placeholder="Username" />
				<input class="col-4 mx-auto form-control" type="password" name="password" v-model="input.password" placeholder="Password" />
				<button class="col-4 btn btn-outline-success" type="button" v-on:click="login()">Login</button>
			</div>
			<div v-else class="text-center">
				<button type="button" class="btn btn-outline-danger" v-on:click="logout()">Logout</button>
			</div>
		</div>
		<div v-if="authenticated">

      <div class="container">
        <p>Select a video file to upload:</p>
        <input type="file" id="vidFileInput" name="vidFile" v-on:change="handleFileUpload" accept=".wav, .mp4, .webm">
        <p>Video name:</p>
        <input type="text" id="vidName" v-model="updateVideo.name">
        <p>Video description:</p>
        <input type="text" id="vidDesc" v-model="updateVideo.description"></br></br>
        <button class="button" v-on:click="postVideo(loggedIn, updateVideo)">Post Video</button>
      </div>

			<div v-if="usersData != null">
        <ul class="list-group">
          <div v-for="user in usersData">
            <li class="list-group-item col-7 mx-auto">
              <div class="d-flex w-100 justify-content-between">
                {{user.username}}
                <button class="button" v-on:click="getVideosByUserId(user.user_id)">Load Videos</button>
              </div>
            </li>
          </div>
        </ul>
      </div> 
      <div v-if="videosData != null">
        <ul class="list-group">
          <div v-for="video in videosData">
            <li class="list-group-item col-7 mx-auto">
              <div class="d-flex w-100 justify-content-between">
                {{video.name}} {{video.description}}
                <div class="btn-group-xs">
                  <button class="button">Watch</button>
                  <button v-if="video.user_id == loggedIn" class="utilityBtn text-danger" v-on:click="deleteVideo(video.video_id)">x</button>
                </div>
              </div>
            </li>
          </div>
        </div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/static/videos.js"></script>
	<link rel="stylesheet" href="/static/videos.css" />
</body>

</html>